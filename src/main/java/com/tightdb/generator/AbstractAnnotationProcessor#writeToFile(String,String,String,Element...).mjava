	protected void writeToFile(String pkg, String filename, String content, Element... originatingElements) {
		final Location location = StandardLocation.SOURCE_OUTPUT;

		Writer writer = null;
		try {
			FileObject fileRes = filer.createResource(location, pkg, filename, originatingElements);
			writer = fileRes.openWriter();
			writer.write(content);
		} catch (IOException e) {
			logger.error("Couldn't write to file: " + filename);
			throw new RuntimeException("Couldn't write to file: " + filename, e);
		} finally {
			if (writer != null) {
				try {
					writer.close();
				} catch (IOException e) {
					logger.error("Couldn't write to file: " + filename);
					throw new RuntimeException("Couldn't write to file: " + filename, e);
				}
			}
		}
	}

