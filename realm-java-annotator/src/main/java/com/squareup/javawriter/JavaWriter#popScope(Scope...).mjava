  private void popScope(Scope... expected) {
    if (!EnumSet.copyOf(Arrays.asList(expected)).contains(scopes.pop())) {
      throw new IllegalStateException();
    }
  }

