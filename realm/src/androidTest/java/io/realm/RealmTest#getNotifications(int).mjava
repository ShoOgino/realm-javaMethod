    private void getNotifications(int totalExpected) {
        int lastCount = 0;
        int retries = 8;

        while (testCount < totalExpected && retries-- > 0) {
            try {
                Thread.sleep(125);
            } catch (Exception ex) {
                fail("Unexpected exception " + ex.getMessage());
            }
            if (lastCount != testCount) {
                lastCount = testCount;
                retries = 8;
            }
        }
    }

