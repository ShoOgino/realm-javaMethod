    private void awaitOrThrow(CountDownLatch latch) {
        try {
            if (!latch.await(5, TimeUnit.SECONDS)) {
                fail("Latch timed out " + latch);
            }
        } catch (InterruptedException e) {
            fail("Latch was interrupted " + e);
        }
    }

