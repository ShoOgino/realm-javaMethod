    public void testBgRealmVersionID () throws Throwable {
        io.realm.internal.Util.setDebugLevel(5);
        final Throwable[] threadAssertionError = new Throwable[1];
        final CountDownLatch signalCallbackFinished = new CountDownLatch(1);
        final Realm realm = openRealmInstance("testBgRealmVersionID");
        final RealmConfiguration configuration = realm.getConfiguration();
        populateTestRealm(realm, 10);
        final SharedGroup.VersionID versionID = realm.sharedGroup.getVersion();

        new Thread() {
            @Override
            public void run() {
                final Realm realm = Realm.getInstance(configuration);
                SharedGroup.VersionID versionIdBg = realm.sharedGroup.getVersion();
                try {
                    assertEquals(0, versionID.compareTo(versionIdBg));
                } catch (AssertionFailedError e) {
                    threadAssertionError[0] = e;
                } finally {
                    realm.close();
                    signalCallbackFinished.countDown();
                }
            }
        }.start();

        signalCallbackFinished.await(7, TimeUnit.SECONDS);
        realm.close();
        if (null != threadAssertionError[0]) {
            // throw any assertion errors happened in the background thread
            throw threadAssertionError[0];
        }
    }

