    // TODO Should throw IllegalState instead
    public void testVersionEqualWhenSchemaChangesThrows() {
        realm = Realm.getInstance(new RealmConfiguration.Builder(getContext())
                .deleteRealmBeforeOpening()
                .schemaVersion(42)
                .schema(Dog.class)
                .create());
        realm.close();

        try {
            Realm.getInstance(new RealmConfiguration.Builder(getContext())
                    .schemaVersion(42)
                    .schema(AllTypesPrimaryKey.class)
                    .create());
            fail("A migration should be required");
        } catch (RealmMigrationNeededException expected) {
        }
    }

