    // Public because of migrations
    public Table getTable(Class<? extends RealmObject> clazz) {
        //This cast is correct because obj is either
        //generated by RealmProxy or the original type extending directly from RealmObject
        @SuppressWarnings("unchecked")
        Class<? extends RealmObject> superclass = (Class<? extends RealmObject>) clazz.getSuperclass();

        if (!superclass.equals(RealmObject.class)) {
            clazz = superclass;
        }

        return transaction.getTable(proxyMediator.getTableName(clazz));
    }

