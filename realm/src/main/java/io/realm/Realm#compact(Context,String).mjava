    /**
     * Compact a realm file. A realm might contain free/unused space, and it is removed during
     * the process. Objects within the realm files are untouched. The size of realm file is
     * typically smaller as a result of calling this method.
     *
     * If the realm file is already opened, compacting the file might failed.
     *
     * The realm file is left untouched if any file operation fail. The file system should have
     * free space for at least a copy of the realm file.
     *
     * @param context an Android {@link android.content.Context}
     * @param fileName the name of the file to compact
     * @return true if successful, false if any file operation failed
     */

    public static boolean compact(Context context, String fileName) {
        File realmFile = new File(context.getFilesDir(), fileName);
        File tmpFile = new File(
                context.getFilesDir(),
                String.valueOf(System.currentTimeMillis()) + UUID.randomUUID() + ".realm");

        Realm realm = null;
        try {
            realm = Realm.getInstance(context, fileName);
            realm.writeCopy(tmpFile);
            if (!realmFile.delete()) {
                return false;
            }
            if (!tmpFile.renameTo(realmFile)) {
                return false;
            }
        } catch (IOException e) {
            return false;
        } finally {
            if (realm != null) {
                realm.close();
            }
        }
        return true;
    }

