    private Class<?> getProxyClass(Class<?> clazz) {

        String simpleClassName = simpleClassNames.get(clazz);
        if (simpleClassName == null) {
            simpleClassName = clazz.getSimpleName();
            simpleClassNames.put(clazz, simpleClassName);
        }
        String generatedClassName = getProxyClassName(simpleClassName);

        Class<?> generatedClass = generatedClasses.get(generatedClassName);
        if (generatedClass == null) {
            try {
                generatedClass = Class.forName(generatedClassName);
            } catch (ClassNotFoundException e) {
                throw new RealmException("Could not find the generated proxy class: " + APT_NOT_EXECUTED_MESSAGE);
            }
            generatedClasses.put(generatedClassName, generatedClass);
        }

        return generatedClass;
    }

