    private SharedRealm(long nativePtr, RealmConfiguration configuration, RealmNotifier notifier,
                        RowNotifier rowNotifier, SchemaVersionListener schemaVersionListener) {
        this.nativePtr = nativePtr;
        this.configuration = configuration;

        if (notifier != null) {
            notifier.setSharedRealm(this);
        }
        this.realmNotifier = notifier;

        this.rowNotifier = rowNotifier;
        this.schemaChangeListener = schemaVersionListener;
        context = new Context();
        this.lastSchemaVersion = schemaVersionListener == null ? -1L : getSchemaVersion();
        objectServerFacade = null;
        nativeSetAutoRefresh(nativePtr, capabilities.canDeliverNotification());
    }

