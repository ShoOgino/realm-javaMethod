    /**
     * Constructs a new shared group using implicit transactions.
     *
     * @param config RealmConfiguration to create the SharedGroup for.
     */
    public SharedGroup(RealmConfiguration config) {
        String canonicalPath = config.getPath();
        boolean syncEnabled = config.isSyncEnabled();
        byte[] encryptionKey = config.getEncryptionKey();
        Durability durability = config.getDurability();

        if (syncEnabled) {
            nativeReplicationPtr = nativeCreateSyncReplication(canonicalPath);
        } else {
            nativeReplicationPtr = nativeCreateLocalReplication(canonicalPath, encryptionKey);
        }
        nativePtr = openSharedGroupOrFail(nativeReplicationPtr, canonicalPath, durability, encryptionKey);
        implicitTransactionsEnabled = true;
        context = new Context();
        path = canonicalPath;
        checkNativePtrNotZero();

        if (syncEnabled) {
            //TODO client is thread-safe & it should be global & reused across different RealmConfiguration
            sessionPtr = SyncManager.getSession(config.getSyncUserToken(), config.getPath(), config.getSyncServerUrl());
        }
    }

