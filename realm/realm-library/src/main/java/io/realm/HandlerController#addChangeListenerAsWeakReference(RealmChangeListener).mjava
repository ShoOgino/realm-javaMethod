    /**
     * For internal use only.
     * Sometimes we don't know when to unregister listeners (ex: {@link RealmBaseAdapter}). Using
     * a WeakReference the listener doesn't need to be explicitly unregistered.
     *
     * @param listener the change listener.
     */
    void addChangeListenerAsWeakReference(RealmChangeListener listener) {
        Iterator<WeakReference<RealmChangeListener>> iterator = weakChangeListeners.iterator();
        while (iterator.hasNext()) {
            WeakReference<RealmChangeListener> ref = iterator.next();
            if (ref.get() == null) {
                iterator.remove();

            } else if (ref.get() == listener) {
                return; // It has already been added before
            }
        }

        weakChangeListeners.add(new WeakReference<RealmChangeListener>(listener));
    }

