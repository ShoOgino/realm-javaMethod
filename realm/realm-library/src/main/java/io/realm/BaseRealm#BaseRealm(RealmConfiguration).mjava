    protected BaseRealm(RealmConfiguration configuration) {
        this.threadId = Thread.currentThread().getId();
        this.configuration = configuration;

        this.sharedRealm = SharedRealm.getInstance(configuration,
                !(this instanceof Realm) ? null :
                new SharedRealm.SchemaVersionListener() {
                    @Override
                    public void onSchemaVersionChanged(long currentVersion) {
                        RealmCache.updateSchemaCache((Realm) BaseRealm.this);
                    }
                });
        this.schema = new RealmSchema(this);
    }

