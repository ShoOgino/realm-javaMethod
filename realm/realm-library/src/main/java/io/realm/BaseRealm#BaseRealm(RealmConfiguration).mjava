    // Create a realm instance without associating it to any RealmCache.
    BaseRealm(RealmConfiguration configuration) {
        this.threadId = Thread.currentThread().getId();
        this.configuration = configuration;
        this.realmCache = null;

        this.sharedRealm = SharedRealm.getInstance(configuration,
                !(this instanceof Realm) ? null :
                        new SharedRealm.SchemaVersionListener() {
                            @Override
                            public void onSchemaVersionChanged(long currentVersion) {
                                if (realmCache != null) {
                                    realmCache.updateSchemaCache((Realm) BaseRealm.this);
                                }
                            }
                        }, true);
        this.shouldCloseSharedRealm = true;
    }

