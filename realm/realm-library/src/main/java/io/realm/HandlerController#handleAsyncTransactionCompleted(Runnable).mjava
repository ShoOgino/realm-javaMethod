    /**
     * Properly handles when an async transaction completes. This will be treated as a REALM_CHANGED event when
     * determining which queries to re-run and when to notify listeners.
     * <p>
     * NOTE: This is needed as it is not possible to combine a `Message.what` value and a callback runnable. So instead
     * of posting two messages, we post a runnable that runs this method. This means it is possible to interpret
     * `REALM_CHANGED + Runnable` as one atomic message.
     *
     * @param onSuccess onSuccess callback to run for the async transaction that completed.
     */
    public void handleAsyncTransactionCompleted(Runnable onSuccess) {
        if (onSuccess != null) {
            pendingOnSuccessAsyncTransactionCallbacks.add(onSuccess);
        }
        realmChanged(false);
    }

