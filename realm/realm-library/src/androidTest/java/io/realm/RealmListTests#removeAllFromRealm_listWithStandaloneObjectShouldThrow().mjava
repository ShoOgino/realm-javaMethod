    @Test
    public void removeAllFromRealm_listWithStandaloneObjectShouldThrow() {
        final RealmList<Dog> list = new RealmList<Dog>();

        testRealm.beginTransaction();
        Dog dog1 = testRealm.where(Dog.class).findFirst();
        testRealm.commitTransaction();
        Dog dog2 = new Dog();

        list.add(dog1);
        list.add(dog2);

        testRealm.beginTransaction();
        try {
            list.removeAllFromRealm();
            fail("Cannot remove a list with a standalone object in it!");
        } catch (IllegalStateException e) {
            assertEquals("Object malformed: missing object in Realm. Make sure to instantiate RealmObjects with" +
                    " Realm.createObject()", e.getMessage());
        } finally {
            testRealm.cancelTransaction();
        }

        assertEquals(TEST_OBJECTS, testRealm.where(Dog.class).count());
        assertEquals(2, list.size());
    }

