    public void testCloseable() {

        String testFile = new File(
                this.getContext().getFilesDir(),
                "closeableTest.realm").toString();
        File f = new File(testFile);
        if (f.exists()) {
            boolean result = f.delete();
            if (!result) {
                fail();
            }
        }

        List<Closeable> resources = new ArrayList<Closeable>();

        SharedGroup sg = new SharedGroup(testFile);
        resources.add(sg);

        WriteTransaction wt = sg.beginWrite();
        resources.add(wt);
        try {
            Table t = wt.getTable("test");
            resources.add(t);
            t.addColumn(RealmFieldType.STRING, "StringColumn");

            t.add("abc");
            t.add("cba");

            wt.commit();

        } catch(Throwable t) {
            wt.rollback();
        } finally {
            for (Closeable c : resources) {
                try {
                    c.close();
                } catch(java.io.IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

