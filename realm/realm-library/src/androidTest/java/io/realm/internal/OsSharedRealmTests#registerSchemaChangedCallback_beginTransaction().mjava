    @Test
    public void registerSchemaChangedCallback_beginTransaction() {
        final AtomicBoolean listenerCalled = new AtomicBoolean(false);

        assertFalse(sharedRealm.hasTable("NewTable"));

        sharedRealm.registerSchemaChangedCallback(new OsSharedRealm.SchemaChangedCallback() {
            @Override
            public void onSchemaChanged() {
                assertTrue(sharedRealm.hasTable("NewTable"));
                listenerCalled.set(true);
            }
        });
        changeSchemaByAnotherRealm();
        sharedRealm.beginTransaction();
        assertTrue(listenerCalled.get());
    }

