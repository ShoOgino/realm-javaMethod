    @Test
    public void testShouldThrowOnUpdateFromTableSpecOnSubtable() {
        // Table definition
        Table persons = new Table();

        persons.addColumn(RealmFieldType.STRING, "name");
        persons.addColumn(RealmFieldType.STRING, "email");
        persons.addColumn(RealmFieldType.UNSUPPORTED_TABLE, "addresses");

        TableSchema addresses = persons.getSubtableSchema(2);
        addresses.addColumn(RealmFieldType.STRING, "street");
        addresses.addColumn(RealmFieldType.INTEGER, "zipcode");
        addresses.addColumn(RealmFieldType.UNSUPPORTED_TABLE, "phone_numbers");

        persons.add(new Object[]{"Mr X", "xx@xxxx.com", new Object[][]{{"X Street", 1234, null}}});

        Table address = persons.getSubtable(2, 0);

        spec.addColumn(RealmFieldType.INTEGER, "foo");

        try {
            address.updateFromSpec(spec);
            fail("Address is subtable. Not allowed to update from spec");
        } catch (UnsupportedOperationException e) {
        }
    }

