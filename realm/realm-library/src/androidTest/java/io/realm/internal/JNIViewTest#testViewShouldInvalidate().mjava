    public void testViewShouldInvalidate() {
        Table t = new Table();
        t.addColumn(RealmFieldType.INTEGER, "intCol");
        t.add(1);
        t.add(2);
        t.add(3);

        TableView view = t.where().equalTo(new long[]{0}, 2).findAll();
        // Access view is ok.
        assertEquals(1, view.size());

        // Access view after change in value is ok.
        t.setLong(0, 0, 3, false);
        accessingViewOk(view);

        // Access view after additions to table must fail.
        t.add(4);
        accessingViewMustThrow(view);

        // Recreates view to access again.
        view = t.where().equalTo(new long[]{0}, 2).findAll();
        accessingViewOk(view);

        // Removing any row in Table should invalidate view.
        t.remove(3);
        accessingViewMustThrow(view);
    }

