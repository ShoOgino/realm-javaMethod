    // mixed async RealmObject & RealmResults
    @Test
    @RunTestInLooperThread
    public void refresh_should_notify_callbacks_mixed() {
        final CountDownLatch listenerWasCalledOnRealmObject = new CountDownLatch(1);
        final CountDownLatch listenerWasCalledOnRealmResults = new CountDownLatch(1);

        final Realm realm = looperThread.realm;
        // Swallow all REALM_CHANGED events to test the behaviour of an explicit refresh
        final Handler handler = new HandlerProxy(realm.handlerController) {
            @Override
            public boolean onInterceptOutMessage(int what) {
                return false;
            }

            @Override
            public boolean onInterceptInMessage(int what) {
                switch (what) {
                    case HandlerController.REALM_CHANGED: {
                        return true;
                    }
                }
                return false;
            }
        };
        realm.setHandler(handler);

        Dog dog = realm.where(Dog.class).findFirstAsync();
        RealmResults<Dog> dogs = realm.where(Dog.class).findAllAsync();

        assertTrue(dog.load());
        assertTrue(dogs.load());

        dog.addChangeListener(new RealmChangeListener() {
            @Override
            public void onChange() {
                listenerWasCalledOnRealmObject.countDown();
                if (listenerWasCalledOnRealmObject.getCount() == 0 && listenerWasCalledOnRealmResults.getCount() == 0) {
                    looperThread.testComplete();
                }
            }
        });

        dogs.addChangeListener(new RealmChangeListener() {
            @Override
            public void onChange() {
                listenerWasCalledOnRealmResults.countDown();
                if (listenerWasCalledOnRealmObject.getCount() == 0 && listenerWasCalledOnRealmResults.getCount() == 0) {
                    looperThread.testComplete();
                }
            }
        });

        Thread thread = new Thread() {
            @Override
            public void run() {
                Realm bgRealm = Realm.getInstance(looperThread.realmConfiguration);
                bgRealm.beginTransaction();
                Dog akamaru = bgRealm.createObject(Dog.class);
                akamaru.setName("Akamaru");
                bgRealm.commitTransaction();
                bgRealm.close();
            }
        };
        thread.start();

        try {
            thread.join();
        } catch (InterruptedException e) {
            fail(e.getMessage());
        }

        realm.refresh();
    }

