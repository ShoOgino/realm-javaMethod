    public void testSetClosedObjectToLinkLists() {
        testRealm.beginTransaction();
        CyclicType closed = testRealm.createObject(CyclicType.class);
        testRealm.commitTransaction();
        testRealm.close();
        assertTrue(testRealm.isClosed());

        testRealm = Realm.getInstance(realmConfig);
        testRealm.beginTransaction();
        try {
            CyclicType target = testRealm.createObject(CyclicType.class);

            RealmList<CyclicType> list = new RealmList<>();
            list.add(testRealm.createObject(CyclicType.class));
            list.add(closed);
            list.add(testRealm.createObject(CyclicType.class));

            try {
                target.setObjects(list);
                fail();
            } catch (IllegalArgumentException ignored) {
            }
        } finally {
            testRealm.cancelTransaction();
        }
    }

