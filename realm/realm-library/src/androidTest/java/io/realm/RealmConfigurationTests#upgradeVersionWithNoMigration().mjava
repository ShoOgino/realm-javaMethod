    @Test
    public void upgradeVersionWithNoMigration() {
        realm = Realm.getInstance(defaultConfig);
        assertEquals(0, realm.getVersion());
        realm.close();

        // Version upgrades should always require a migration.
        try {
            realm = Realm.getInstance(new RealmConfiguration.Builder(context)
                    .directory(configFactory.getRoot())
                    .schemaVersion(42)
                    .build());
            fail();
        } catch (RealmMigrationNeededException expected) {
            // And it should come with a cause.
            assertEquals("Realm on disk need to migrate from v0 to v42", expected.getMessage());
        }
    }

