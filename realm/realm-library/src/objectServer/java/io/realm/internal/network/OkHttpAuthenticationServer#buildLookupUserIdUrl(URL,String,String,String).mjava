    private static URL buildLookupUserIdUrl(URL authenticationUrl, String action, String provider, String providerId) {
        String authURL = authenticationUrl.toExternalForm();
        String separator = authURL.endsWith("/") ? "" : "/";
        try {
            return new URL(authURL + separator + action + "/" + providerId);
        } catch (MalformedURLException e) {
            throw new RuntimeException(e);
        }
    }

