    @Test
    @RunTestInLooperThread
    public void acceptOffer_multipleUsers() {
        final String offerToken = createOffer(user, "test", AccessLevel.WRITE, null);
        final SyncUser user2 = UserFactory.createUniqueUser();
        final SyncUser user3 = UserFactory.createUniqueUser();

        final AtomicInteger offersAccepted = new AtomicInteger(0);
        SyncUser.Callback<String> callback = new SyncUser.Callback<String>() {
            @Override
            public void onSuccess(String url) {
                assertEquals("/" + user.getIdentity() + "/test", url);
                if (offersAccepted.incrementAndGet() == 2) {
                    looperThread.testComplete();
                }
            }

            @Override
            public void onError(ObjectServerError error) {
                fail(error.toString());
            }
        };

        user2.acceptPermissionsOfferAsync(offerToken, callback);
        user2.acceptPermissionsOfferAsync(offerToken, callback);
    }

