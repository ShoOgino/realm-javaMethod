    @Test
    @RunTestInLooperThread
    public void registerConnectionListener() {
        SyncSession session = getSession();
        session.addConnectionChangeListener((oldState, newState) -> {
            if (newState == ConnectionState.DISCONNECTED) {
                looperThread.testComplete();
            }
        });
        session.stop();
    }

