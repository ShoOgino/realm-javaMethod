    @Test
    public void subscribeOrUpdate() {
        String name = randomName();
        realm = getPartialRealm();
        realm.beginTransaction();
        RealmQuery<AllTypes> query1 = realm.where(AllTypes.class).equalTo(AllTypes.FIELD_STRING, "foo");
        Subscription sub1 = query1.subscribe(name);
        Date firstUpdate = sub1.getUpdatedAt();
        RealmQuery<AllTypes> query2 = realm.where(AllTypes.class).equalTo(AllTypes.FIELD_BOOLEAN, false);
        SystemClock.sleep(2);
        Subscription sub2 = query2.subscribeOrUpdate(name);
        assertEquals(sub1, sub2);
        assertEquals(query2.getDescription(), sub2.getQueryDescription());
        assertTrue(firstUpdate.getTime() < sub2.getUpdatedAt().getTime());
    }

