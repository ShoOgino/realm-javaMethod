    @Test
    public void findOrCreate_createPermission() {
        realm.beginTransaction();
        realm.createObject(Role.class, "role1");

        RealmPermissions realmPermissions = realm.getPermissions();
        assertEquals(1, realmPermissions.getPermissions().size());
        Permission p = realmPermissions.findOrCreate("role1");
        assertNoAccess(p);
        assertEquals("role1", p.getRole().getName());
        assertEquals(2, realmPermissions.getPermissions().size());
        assertTrue(p.equals(realmPermissions.getPermissions().last()));

        // Class permissions
        ClassPermissions classPermissions = realm.getPermissions(ClassPermissions.class);
        assertEquals(1, classPermissions.getPermissions().size());
        p = classPermissions.findOrCreate("role2");
        assertNoAccess(p);
        assertEquals("role2", p.getRole().getName());
        assertEquals(2, classPermissions.getPermissions().size());
        assertTrue(p.equals(classPermissions.getPermissions().last()));
    }

