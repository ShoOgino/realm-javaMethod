    @Test
    @UiThreadTest
    public void uploadAllLocalChanges_throwsOnUiThread() throws InterruptedException {
        Realm realm = Realm.getInstance(configuration);
        try {
            SyncManager.getSession(configuration).uploadAllLocalChanges();
            fail("Should throw an IllegalStateException on Ui Thread");
        } catch (IllegalStateException ignored) {
        } finally {
            realm.close();
        }
    }

