    @Test
    public void schemaVersion_bumpWhenUpgradingSchema() throws IOException {
        SyncUser user = createTestUser();
        String url = "realm://ros.realm.io/~/default";
        @SuppressWarnings("unchecked")
        SyncConfiguration config = configFactory.createSyncConfigurationBuilder(user, url)
                .schema(AllJavaTypes.class, StringOnly.class)
                .name("schemaversion_v1.realm")
                .schemaVersion(2)
                .build();

        // Add v1 of the Realm to the file system. v1 is missing the class `StringOnly`
        configFactory.copyRealmFromAssets(context, "schemaversion_v1.realm", config);

        // Opening the Realm should automatically upgrade the schema and version
        Realm realm = null;
        try {
            realm = Realm.getInstance(config);
            assertEquals(2, realm.getVersion());
            assertTrue(realm.getSchema().contains(StringOnly.class.getSimpleName()));
        } finally {
            if (realm != null) {
                realm.close();
            }
        }
    }

