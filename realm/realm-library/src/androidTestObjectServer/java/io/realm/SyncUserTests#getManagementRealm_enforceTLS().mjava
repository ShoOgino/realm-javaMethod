    @Test
    public void getManagementRealm_enforceTLS() throws URISyntaxException {
        // Non TLS
        SyncUser user = SyncTestUtils.createTestUser("http://objectserver.realm.io/auth");
        Realm managementRealm = user.getManagementRealm();
        SyncConfiguration config = (SyncConfiguration) managementRealm.getConfiguration();
        assertEquals(new URI("realm://objectserver.realm.io/" + user.getIdentity() + "/__management"), config.getServerUrl());
        managementRealm.close();

        // TLS
        user = SyncTestUtils.createTestUser("https://objectserver.realm.io/auth");
        managementRealm = user.getManagementRealm();
        config = (SyncConfiguration) managementRealm.getConfiguration();
        assertEquals(new URI("realms://objectserver.realm.io/" + user.getIdentity() + "/__management"), config.getServerUrl());
        managementRealm.close();
    }

