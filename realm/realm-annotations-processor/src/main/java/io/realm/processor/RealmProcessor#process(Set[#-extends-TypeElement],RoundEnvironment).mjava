    @Override
    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment roundEnv) {
        round++;

        if (round == 0) {
            RealmVersionChecker.getInstance(processingEnv).executeRealmVersionUpdate();
        }

        if (roundEnv.errorRaised()) { return ABORT; }

        if (!hasProcessedModules) {
            Utils.initialize(processingEnv);
            TypeMirrors typeMirrors = new TypeMirrors(processingEnv);

            // Build up internal metadata while validating as much as possible
            if (!preProcessModules(roundEnv)) { return ABORT; }
            if (!processClassAnnotations(roundEnv, typeMirrors)) { return ABORT; }
            if (!postProcessModules()) { return ABORT; }
            if (!validateBacklinks()) { return ABORT; }
            hasProcessedModules = true;

            // Create all files
            if (!createProxyClassFiles(typeMirrors)) { return ABORT; }
            if (!createModuleFiles(roundEnv)) { return ABORT; }
        }

        return CONSUME_ANNOTATIONS;
    }

